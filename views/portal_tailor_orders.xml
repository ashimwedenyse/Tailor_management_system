<odoo>
    <!-- Link button for portal main page -->
    <template id="portal_home_custom" inherit_id="portal.portal_my_home">
        <xpath expr="//div[contains(@class,'o_portal_my_home')]">
            <div class="mb-3">
                <a href="/my/tailor-orders" class="btn btn-primary">
                    My Tailor Orders
                </a>
            </div>
        </xpath>
    </template>

    <!-- Tailor Orders List -->
    <template id="portal_tailor_orders" name="Customer Tailor Orders">
        <t t-call="website.layout">
            <main class="container mt16 mb16">
                <h2>My Tailor Orders</h2>

                <t t-if="orders">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Reference</th>
                                <th>Order Date</th>
                                <th>Delivery Date</th>
                                <th>Status</th>
                                <th>Product</th>
                                <th>Quantity</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="orders" t-as="order">
                                <tr>
                                    <td><t t-esc="order.name"/></td>

                                    <td>
                                        <t t-if="order.order_date">
                                            <span t-field="order.order_date" t-options="{'widget': 'datetime'}"/>
                                        </t>
                                        <t t-else="">N/A</t>
                                    </td>

                                    <td>
                                        <t t-if="order.delivery_date">
                                            <span t-field="order.delivery_date" t-options="{'widget': 'datetime'}"/>
                                        </t>
                                        <t t-else="">N/A</t>
                                    </td>

                                    <td><t t-esc="order.status"/></td>
                                    <td><t t-esc="order.product_id and order.product_id.name or 'N/A'"/></td>
                                    <td><t t-esc="order.quantity"/></td>
                                    <td>
                                        <a t-attf-href="/my/tailor-orders/#{order.id}" class="btn btn-sm btn-info">
                                            View
                                        </a>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </t>

                <t t-else="">
                    <p>No Tailor Orders found.</p>
                </t>
            </main>
        </t>
    </template>

    <!-- Tailor Order Detail -->
    <template id="portal_tailor_order_detail" name="Tailor Order Details">
        <t t-call="website.layout">
            <main class="container mt16 mb16">
                <h2>Order <t t-esc="order.name"/></h2>

                <ul>
                    <li>
                        <strong>Order Date:</strong>
                        <t t-if="order.order_date">
                            <span t-field="order.order_date" t-options="{'widget': 'datetime'}"/>
                        </t>
                        <t t-else="">N/A</t>
                    </li>

                    <li>
                        <strong>Delivery Date:</strong>
                        <t t-if="order.delivery_date">
                            <span t-field="order.delivery_date" t-options="{'widget': 'datetime'}"/>
                        </t>
                        <t t-else="">N/A</t>
                    </li>

                    <li><strong>Product:</strong> <t t-esc="order.product_id and order.product_id.name or 'N/A'"/></li>
                    <li><strong>Quantity:</strong> <t t-esc="order.quantity"/></li>
                    <li><strong>Booking Date:</strong> <t t-esc="order.booking_date or 'N/A'"/></li>
                    <li><strong>Trial Date:</strong> <t t-esc="order.trial_date or 'N/A'"/></li>
                    <li><strong>Home Delivery:</strong> <t t-esc="order.home_delivery and 'Yes' or 'No'"/></li>
                    <li><strong>Advance Payment:</strong> <t t-esc="order.advance_payment or 0.0"/></li>
                </ul>

                <!-- Accordion for Tailor Info -->
                <div class="accordion" id="tailorAccordion">
                    <div class="card">
                        <div class="card-header" id="headingTailor">
                            <h5 class="mb-0">
                                <button class="btn btn-link" type="button"
                                        data-bs-toggle="collapse"
                                        data-bs-target="#collapseTailor"
                                        aria-expanded="true">
                                    Tailor Information
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTailor" class="collapse show">
                            <div class="card-body">
                                <ul>
                                    <li>
                                        <strong>Tailor:</strong>
                                        <t t-esc="order.tailor_id and order.tailor_id.name or 'Not Assigned'"/>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Approve Button -->
                <t t-if="not order.customer_approved">
                    <form t-att-action="'/my/tailor-orders/%d/approve' % order.id" method="post">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <button type="submit" class="btn btn-success mt-3">
                            Approve Order
                        </button>
                    </form>
                </t>
                <t t-else="">
                    <p class="text-success mt-3">
                        <strong>Order Approved âœ…</strong>
                    </p>
                </t>

                <a href="/my/tailor-orders" class="btn btn-primary mt-3">
                    Back to Tailor Orders
                </a>
            </main>
        </t>
    </template>
</odoo>
